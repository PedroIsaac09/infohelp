{% extends "base.html" %}
{% load static %}

{% block title %}Cursos - InfoHelp{% endblock title %}

{% block content %}
    <section class="container">
        <div class="titulo-pag">
            <h1>Cursos da plataforma</h1>
            <div class="form-categoria">
                <form action="{% url "listar_cursos" %}" method="POST">
                    {% csrf_token %}
                    <label for="categoria">Categoria</label>
                    <select name="categoria" id="categoria">
                        <option value="">Todas</option>
                        {% for cat in curso %}
                            <option value="{{ cat.categoria }}">{{ cat.categoria }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit">Filtrar</button>
                </form>
            </div>
            <p>Categoria <i class='bx bxs-down-arrow'></i></p>
        </div>
    </section>
    
    <section>
        <div class="cursos-cards container">
            {% for curso in cursos %}
                <div class="card-curso card_curso-1">
                    <a class="acesso-curso" href="{% url "detalhes_curso" curso.id %}">

                        <div class="img-curso">
                            {% if curso.capa %}
                            <img src="{{ curso.capa.url }}" alt="Capa do curso">
                            {% else %}
                            <img src="{% static "assets/placeholder.png" %}" alt="Sem capa">
                            {% endif %}
                        </div>

                        <h2>{{ curso.nome }}</h2>
                        <div class="categoria"><p>{{ curso.categoria }}</p></div>
                        <div class="horario-nivel">
                            <img src="{% static "assets/icons/relogioCard.svg" %}" alt="">
                            <p>{{ curso.carga_horaria }}</p>
                            <p>{{ curso.nivel }}</p>
                        </div>
                    </a>
                    <div class="btn-admin_curso">
                        
                        <a class="editar-curso" href="{% url "editar_curso" curso.id %}">
                             Editar curso
                        </a>
                       
                        <a class="excluir-curso" href="{% url "excluir_curso" curso.id %}">Excluir curso</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

    {% if request.user.is_authenticated and perms.infohelp.criar_curso %}
    <section>
        <div class="box_criar-curso container">
            <p>Adicione novos cursos Ã  sua lista</p>
            <a href="{% url "criar_curso" %}" class="btn-criar-curso">Criar novo curso</a>
        </div>
    </section>
    {% endif %}

{% endblock content %}